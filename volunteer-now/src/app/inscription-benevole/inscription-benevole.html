<app-header-inscrit></app-header-inscrit>
<main class="main-container">
  <div class="form-wrapper">

    <!-- HERO -->
    <div class="hero">
      <h1>Devenez <span class="orange">bÃ©nÃ©vole</span> en quelques clics</h1>
      <p>Remplissez ce formulaire unique pour rejoindre la communautÃ© et commencer Ã  agir prÃ¨s de chez vous.</p>
    </div>

    <!-- FORMULAIRE -->
    <form #form="ngForm" (ngSubmit)="onSubmit(form)" class="form">

      <!-- IDENTITÃ‰ -->
      <section class="section">
        <h2><span class="icon">ğŸ‘¤</span> IdentitÃ©</h2>

        <!-- NOM -->
        <div class="field">
          <label>Nom complet <span class="required">*</span></label>
          <input type="text" name="nom" ngModel required #nom="ngModel" placeholder="Jean Dupont">
          <div *ngIf="nom.invalid && nom.touched" class="error">Le nom est obligatoire.</div>
        </div>

        <!-- TÃ‰LÃ‰PHONE -->
        <div class="field">
          <label>TÃ©lÃ©phone <span class="required">*</span></label>
          <input type="tel" name="phone" ngModel required #phone="ngModel" placeholder="+216 27 000 000">
          <div *ngIf="phone.invalid && phone.touched" class="error">Le tÃ©lÃ©phone est obligatoire.</div>
        </div>

        <!-- EMAIL -->
        <div class="field">
          <label>Email <span class="required">*</span></label>
          <input type="email" name="email" ngModel required email #email="ngModel" placeholder="jean@email.com">
          <div *ngIf="email.invalid && email.touched" class="error">Email invalide.</div>
        </div>

        <!-- MOT DE PASSE -->
        <div class="field">
          <label>Mot de passe <span class="required">*</span></label>
          <input type="password" name="password" ngModel required minlength="8" #pwd="ngModel" placeholder="8 caractÃ¨res min">
          <p class="hint">Majuscule, chiffre et symbole recommandÃ©s.</p>
          <div *ngIf="pwd.invalid && pwd.touched" class="error">Minimum 8 caractÃ¨res.</div>
        </div>

        <!-- Bio -->
        <div class="field">
          <label>Bio </label>
          <input type="text" name="bio" ngModel placeholder="Exprimez-vous">
        </div>

        <!-- PHOTO DE PROFIL -->
        <div class="field">
          <label>Photo de profil <span class="optional">(optionnel)</span></label>
          <div class="photo-upload-wrapper">
            <!-- AperÃ§u de l'image -->
            <div class="photo-preview" [style.background-image]="'url(' + (photoPreview || '/uploads/users/default-avatar.jpg') + ')'">
              <div class="photo-overlay">
                <span class="icon">ğŸ“·</span>
              </div>
            </div>

            <!-- Input file cachÃ© -->
            <input 
              type="file" 
              #fileInput 
              (change)="onFileSelected($event)" 
              accept="image/*" 
              id="photoUpload" 
              class="hidden-input">

            <!-- Bouton stylisÃ© -->
            <label for="photoUpload" class="upload-btn">
              <span class="icon">â•</span> Choisir une photo
            </label>

            <p class="hint" *ngIf="!photoPreview">
              JPG, PNG ou GIF â€¢ max 5 Mo
            </p>
            <p class="hint success-hint" *ngIf="photoPreview">
              <span class="icon">âœ“</span> Photo prÃªte !
            </p>
          </div>

          <!-- Nom du fichier sÃ©lectionnÃ© -->
          <small *ngIf="selectedFileName" class="file-name">{{ selectedFileName }}</small>
        </div>

        <!-- VILLE -->
        <div class="field">
          <label>Ville <span class="required">*</span></label>
          <input type="text" name="localisation" ngModel required #loc="ngModel" placeholder="Paris, Lyon...">
          <p class="hint">Pour les Ã©vÃ©nements prÃ¨s de chez vous.</p>
          <div *ngIf="loc.invalid && loc.touched" class="error">La ville est obligatoire.</div>
        </div>
      </section>

      <!-- CENTRES Dâ€™INTÃ‰RÃŠT -->
      <section class="section">
        <h2><span class="icon">ğŸ¯</span> Centres dâ€™intÃ©rÃªt</h2>
        <p class="hint">SÃ©lectionnez au moins 2 domaines qui vous passionnent :</p>

        <div class="checkbox-grid">
          <label class="checkbox-label">
            <span class="icon">ğŸŒ±</span>
            <input type="checkbox" name="ecologie" ngModel> Environnement & Nature
          </label>

          <label class="checkbox-label">
            <span class="icon">â¤ï¸</span>
            <input type="checkbox" name="solidarite" ngModel> SantÃ© & Bien-Ãªtre
          </label>

          <label class="checkbox-label">
            <span class="icon">ğŸ¤</span>
            <input type="checkbox" name="education" ngModel> Aide Sociale & Humanitaire
          </label>

          <label class="checkbox-label">
            <span class="icon">ğŸ¾</span>
            <input type="checkbox" name="sante" ngModel> Animaux & Protection animale
          </label>

          <label class="checkbox-label">
            <span class="icon">ğŸ</span>
            <input type="checkbox" name="culture" ngModel> Distribution alimentaire
          </label>

          <label class="checkbox-label">
            <span class="icon">ğŸ’</span>
            <input type="checkbox" name="sport" ngModel> Ã‰ducation & Formation
          </label>
        </div>

        <div *ngIf="form.submitted && countInterets(form) < 2" class="error">
          SÃ©lectionnez au moins 2 centres dâ€™intÃ©rÃªt.
        </div>
      </section>

      <!-- BOUTONS -->
      <div class="actions">
        <a routerLink="/" class="link-text">DÃ©jÃ  inscrit ? Se connecter</a>
        <button 
          type="submit" 
          class="btn-submit"
          [disabled]="!isFormValid(form)"
        >
          CrÃ©er mon compte bÃ©nÃ©vole ğŸš€
        </button>
      </div>

      <p class="legal">
        En vous inscrivant, vous acceptez nos
        <span class="underline">Conditions dâ€™utilisation</span>
        et notre
        <span class="underline">Politique de confidentialitÃ©</span>.
      </p>
    </form>

    <!-- SUCCÃˆS -->
    <div *ngIf="submitted" class="success-box">
      <p>Inscription rÃ©ussie ! Bienvenue.</p>
    </div>

  </div>
</main>

<app-chatbot-button></app-chatbot-button>
<app-footer></app-footer>
