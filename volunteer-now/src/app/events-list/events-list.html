<app-header-commun></app-header-commun>

<section class="hero">
  <h1>{{ title }}</h1>
  <p *ngIf="mode === 'public'">
    Participez √† des actions solidaires et faites la diff√©rence d√®s aujourd‚Äôhui.
  </p>

  <div class="search-bar">
    <input 
      type="text" 
      placeholder="üîç Rechercher un √©v√©nement par nom ou ville..."
      [(ngModel)]="searchText"
      (input)="onSearch()"
    >
  </div>
</section>

<section class="events">
  <ng-container *ngIf="!loading; else loadingTpl">

    <!-- √âv√©nements pagin√©s -->
    <app-event-card 
      *ngFor="let ev of paginatedEvents" 
      [event]="ev"
      [isOrganization]="mode === 'organization'"
      (editEvent)="handleEditEvent($event)"
      (deleteEvent)="handleDeleteEvent($event)">
    </app-event-card>

    <!-- Aucun r√©sultat -->
    <div *ngIf="filteredEvents.length === 0" class="no-events">
      Aucun √©v√©nement trouv√© pour le moment.
    </div>

    <!-- Pagination (visible seulement s'il y a plus de 9 √©v√©nements) -->
    <div class="pagination" *ngIf="filteredEvents.length > itemsPerPage">
  <button (click)="prevPage()" [disabled]="currentPage === 1">‚Üê</button>
  <button 
    *ngFor="let page of pagesArray"
    (click)="setPage(page)"
    [class.active]="page === currentPage"
    [disabled]="page === '...'">
    {{ page }}
  </button>
  <button (click)="nextPage()" [disabled]="currentPage === totalPages">‚Üí</button>
</div>

  </ng-container>

  <ng-template #loadingTpl>
    <div class="loading">Chargement des √©v√©nements‚Ä¶</div>
  </ng-template>
</section>

<app-footer></app-footer>
<app-chatbot-button></app-chatbot-button>