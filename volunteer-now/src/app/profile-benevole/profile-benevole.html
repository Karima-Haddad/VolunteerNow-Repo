<app-header-commun></app-header-commun>


<main class="main-content">

<!-- HERO PROFIL -->
<section class="hero">
  <div class="avatar">
    <img *ngIf="photoUrl()" 
         [src]="photoUrl()!" 
         alt="Photo de profil" />
  </div>
  <div class="hero-info">
    <h1>{{ userName() }}</h1>
    <p class="join-text">{{ bio() || "Heureux(se) de contribuer Ã  des actions solidaires avec VolunteerNow." }}</p>

    <div class="tags">
      @for (interest of interests(); track interest) {
        <span class="tag" 
              [ngClass]="{
            'tag-ecology': interest === 'Ã‰cologie & Environnement',
            'tag-solidarity': interest === 'SolidaritÃ© & Aide sociale',
            'tag-education': interest === 'Ã‰ducation & Jeunesse',
            'tag-health': interest === 'SantÃ© & Bien-Ãªtre',
            'tag-culture': interest === 'Culture & Patrimoine',
            'tag-sport': interest === 'Sport & Animation'
          }">
          {{ interest }}
        </span>
      }
    </div>

    <button class="edit-profile-btn" routerLink="/Modifier-profil">
      âœï¸ Modifier le profil
    </button>

  </div>
</section>

<!-- STATS -->
<section class="stats">
  <div class="stat-card">
    <div class="stat-icon">ğŸ†</div>
    <div class="stat-value">{{ eventsCount() }}</div>
    <div class="stat-label">Ã‰vÃ©nements</div>
  </div>
  <div class="stat-card">
    <div class="stat-icon">ğŸŒŸ</div>
    <div class="stat-value">{{ rating() }}</div>
    <div class="stat-label">Note moyenne</div>
  </div>
  <div class="stat-card">
    <div class="stat-icon">ğŸ–ï¸</div>
    <div class="stat-value">{{ badgesCount() }}</div>
    <div class="stat-label">Badges gagnÃ©s</div>
  </div>
</section>

<!-- BADGES -->
<section class="badges">
  <h2>ğŸ§¡ Mes Badges</h2>
  <div class="badges-grid">
    @for (badge of badges(); track badge.name) {
      <div class="badge-item" [class.locked]="!badge.unlocked">
        <div class="badge-circle" [class.locked-circle]="!badge.unlocked">
          {{ badge.icon }}
        </div>
        <p>{{ badge.name }}</p>
      </div>
    }

    @if (badges().length === 0) {
      <p class="empty">Aucun badge pour le moment.</p>
    }

  </div>
</section>

<!-- Ã‰VÃ‰NEMENTS -->
<section class="events">
  <h2>ğŸ—“ï¸ Derniers Ã©vÃ©nements</h2>
  <div class="events-list">
    @for (event of recentEvents(); track event.title) {
      <div class="event-item" [class.upcoming]="event.status === 'Ouvert'">
        <div class="event-info">
          <span class="event-icon {{ event.category }}"></span>
          <div>
            <p class="event-title">{{ event.title }}</p>
            <p class="event-meta">{{ event.date }} â€¢ {{ event.location }}</p>
          </div>
        </div>
        <span class="event-status"
            [ngClass]="{
              'status-completed': event.status === 'TerminÃ©',
              'status-upcoming': event.status === 'Ouvert',
              'status-closed': event.status === 'FermÃ©'
            }">
        {{ event.status }}
      </span>
      </div>
    }

    @if (recentEvents().length === 0) {
      <p class="empty">Aucun Ã©vÃ©nement rÃ©cent.</p>
    }

    
  </div>
 <a [routerLink]="['/user', currentUser?.id]" class="history-link">
  Voir tout lâ€™historique â†’
</a>
</section>

</main> 

<app-chatbot-button></app-chatbot-button>
<app-footer></app-footer>